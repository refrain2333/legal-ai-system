# 环境变量配置示例
# 复制此文件为 .env 并根据实际情况修改配置
LLM_ENABLED=true
LLM_PROVIDER_CLOUDFLARE=true
LLM_PROVIDER_GLM=false
LLM_PROVIDER_GEMINI=false
LLM_PROVIDER_SILICONFLOW=false

# ===========================================
# 应用基础配置
# ===========================================
APP_NAME="Legal Navigation AI"
APP_VERSION="1.0.0"
APP_ENV="development"  # development, production, testing
DEBUG=true

# ===========================================
# 服务器配置
# ===========================================
HOST="127.0.0.1"
PORT=5006
WORKERS=1


# ===========================================
# 模型配置 - 已切换到Lawformer + 微调增强版
# ===========================================
MODEL_NAME="thunlp/Lawformer"
MODEL_CACHE_DIR="./.cache/transformers"
LOCAL_MODEL_PATH="./.cache/transformers/models--thunlp--Lawformer"  # 基础Lawformer模型路径
FINE_TUNED_MODEL_PATH="./models/fine_tuned/lawformer_enhanced_v1.0.pt"  # 微调增强模型
USE_FINE_TUNED_MODEL=false  # 暂时使用基础模型，保持向量兼容性
EMBEDDING_DIM=768
MAX_SEQUENCE_LENGTH=4096
MODEL_OFFLINE_MODE=true  # 优先使用离线模式

# ===========================================
# 检索配置
# ===========================================
DEFAULT_TOP_K=10
SEARCH_TIMEOUT=30
CACHE_SIZE=1000
CACHE_TTL=3600

# ===========================================
# 日志配置
# ===========================================
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR
LOG_FILE="./logs/app/app.log"
LOG_ROTATION="1 day"
LOG_RETENTION="30 days"

# ===========================================
# API配置
# ===========================================
API_RATE_LIMIT="100/minute"
API_KEY=""  # 如需要API认证
CORS_ORIGINS="http://localhost:5006,http://127.0.0.1:5006,null"

# ===========================================
# Redis配置（可选，用于缓存）
# ===========================================
# REDIS_URL="redis://localhost:6379/0"
# REDIS_PASSWORD=""
# REDIS_DB=0

# ===========================================
# 监控配置
# ===========================================
ENABLE_METRICS=false
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# ===========================================
# 文件路径配置
# ===========================================
DATA_RAW_PATH="./data/raw"
DATA_PROCESSED_PATH="./data/processed"
MODEL_STORAGE_PATH="./models"
INDEX_STORAGE_PATH="./data/indices"

# ===========================================
# 安全配置
# ===========================================
SECRET_KEY="your-secret-key-here"  # 请更改为随机生成的密钥
JWT_ALGORITHM="HS256"
JWT_EXPIRE_MINUTES=60

# ===========================================
# 第三方LLM多模型备选配置
# ===========================================
# 主选：Gemini (通过第三方中转服务)
GEMINI_API_KEY="AIzaSyCOHtt3sMXUMiUhzRIt7JNjT8C4co3km8o"
GEMINI_API_BASE="https://233-gemini-29.deno.dev/chat/completions"

# Gemini模型优先级配置(逗号分隔)
GEMINI_MODELS="gemini-2.5-flash-lite,gemini-2.5-flash,gemini-2.0-flash,gemini-2.0-flash-lite"

# 备选：GLM (智谱AI)
GLM_API_KEY="a9255fb0f423d02c2f002b7f75c72fab.o0WvSxrqNdgqUSzx"  # 智谱AI的API密钥
GLM_API_BASE="https://open.bigmodel.cn/api/paas/v4/"  # GLM的API地址
GLM_MODEL="glm-4.5-flash"

# LLM通用配置
LLM_REQUEST_TIMEOUT=30
LLM_MAX_RETRIES=2
LLM_ENABLE_FALLBACK=true
LLM_MODEL_FALLBACK=true

# Query2doc技术配置
ENABLE_QUERY2DOC=true
QUERY2DOC_MAX_TOKENS=120
QUERY2DOC_TEMPERATURE=0.3

# HyDE技术配置
ENABLE_HYDE=true
HYDE_MAX_TOKENS=200
HYDE_TEMPERATURE=0.2

# 多路召回权重配置
HYBRID_WEIGHT=0.4
QUERY2DOC_WEIGHT=0.35
HYDE_WEIGHT=0.25

# 成本控制
DAILY_LLM_LIMIT=1000
LLM_COST_WARNING_THRESHOLD=4.0

# ===========================================
# 新增：Cloudflare AI 配置
# ===========================================
CF_ACCOUNT_ID="aa75b67286cb3f6c5597c2bf4e2d6c50"
CF_API_TOKEN="nT-RkyjioMHNgMFUXjEGx7XcjXXTOPGDacPLtfZ5"

# ===========================================
# 硅基流动 SiliconFlow 配置
# ===========================================
# 获取API密钥：https://cloud.siliconflow.cn/
SILICONFLOW_API_KEY="sk-xdfaxlfekjbhwgovrukrakbykpgqftscbqmhioantekgootc"  # 请填入你的硅基流动API密钥
SILICONFLOW_API_BASE="https://api.siliconflow.cn/v1"
# 支持的模型（逗号分隔，按优先级排序）
SILICONFLOW_MODELS="Qwen/Qwen3-Next-80B-A3B-Instruct,Qwen/Qwen2.5-7B-Instruct,deepseek-ai/DeepSeek-V2.5,meta-llama/Meta-Llama-3.1-8B-Instruct"

# LLM调用配置
LLM_REQUEST_TIMEOUT=120
LLM_MAX_RETRIES=2
LLM_ENABLE_FALLBACK=true
