# 法智导航MVP实施计划文档

## 📋 项目概述

### MVP定义
**最小可行产品(Minimum Viable Product)**：在最短时间内，用最少资源实现核心用户价值的产品版本。

### 核心价值主张
- 用户能用大白话提问法律问题
- 系统能理解并给出基本可用的法律建议
- 整个过程简单易懂，普通人可以直接使用

### 成功标准
- 用户问题理解准确率 ≥ 70%
- 答案相关性 ≥ 75%
- 用户基本满意度 ≥ 60%
- 开发周期 ≤ 6周

## 🎯 MVP功能范围

### ✅ 包含功能

#### 1. 基础智能问答
- **自然语言输入**：支持用户用大白话提问
- **问题理解**：AI识别问题类型和关键信息
- **智能检索**：基于现有检索引擎查找相关法条案例
- **答案生成**：AI生成用户友好的法律建议

#### 2. 简化的Web界面
- **问题输入框**：简洁的提问界面
- **答案展示区**：结构化展示法律建议
- **基础交互**：提问、查看答案、清除重新开始

#### 3. 核心API接口
- **问答接口**：`POST /api/v1/legal-chat`
- **健康检查**：`GET /api/v1/health`

### ❌ 暂不包含功能

- 复杂的可视化界面
- 知识图谱展示
- 多轮对话历史
- 用户账户系统
- 移动端专门适配
- 高级分析功能

## 🏗 技术架构设计

### 整体架构图
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Web前端界面    │    │   FastAPI后端   │    │   AI服务层      │
│                 │    │                 │    │                 │
│ - 问题输入框     │◄──►│ - 问答API接口   │◄──►│ - GPT-4 API     │
│ - 答案展示区     │    │ - 请求处理      │    │ - 问题理解      │
│ - 基础样式      │    │ - 结果格式化    │    │ - 答案生成      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                ↓
                       ┌─────────────────┐
                       │   检索引擎层     │
                       │                 │
                       │ - 现有检索服务   │
                       │ - 法条数据库     │
                       │ - 案例数据库     │
                       └─────────────────┘
```

### 核心服务模块

#### 1. AI服务层 (新增)
```python
# src/services/ai_service.py
class AIService:
    def understand_question(self, question: str) -> QuestionAnalysis
    def generate_answer(self, question: str, search_results: List) -> LegalAdvice
```

#### 2. 智能问答服务 (新增)
```python  
# src/services/legal_chat_service.py
class LegalChatService:
    def process_question(self, question: str) -> ChatResponse
```

#### 3. Web前端 (新增)
```
# frontend/
├── index.html          # 主页面
├── static/
│   ├── css/style.css   # 基础样式  
│   ├── js/main.js      # 交互逻辑
│   └── images/         # 图片资源
└── templates/          # 页面模板
```

## 📋 详细实施计划

### 阶段1：AI集成开发 (1.5周)

#### 任务清单
- [ ] **AI模型选择和测试** (2天)
  - 对比GPT-4、Claude-3、文心一言的效果
  - 测试中文法律问题理解能力
  - 选定最合适的模型

- [ ] **问题理解模块开发** (3天)
  - 设计问题理解的提示模板
  - 实现问题分类和关键信息提取
  - 测试理解准确率

- [ ] **答案生成模块开发** (3天)  
  - 设计答案生成的提示模板
  - 实现基于检索结果的答案合成
  - 优化答案的可读性

- [ ] **AI服务集成测试** (2天)
  - 端到端功能测试
  - 性能和稳定性测试
  - 错误处理机制完善

#### 关键输出
```python
# src/services/ai_service.py
class AIService:
    async def understand_question(self, question: str) -> dict:
        """
        理解用户问题
        输入: "房东要赶我走怎么办？"
        输出: {
            "问题类型": "房屋租赁合同纠纷",
            "关键词": ["租赁合同", "提前解约"],
            "紧急程度": "中等"
        }
        """
    
    async def generate_answer(self, question: str, results: list) -> dict:
        """
        生成法律建议
        输出: {
            "诊断": "这是房东违约行为",
            "法条": "《民法典》第563条",
            "建议": ["保留证据", "协商解决"]
        }
        """
```

### 阶段2：后端API开发 (1.5周)

#### 任务清单
- [ ] **智能问答API接口** (3天)
  - 设计RESTful API规范
  - 实现问答处理逻辑
  - 整合AI服务和检索引擎

- [ ] **错误处理和日志** (2天)
  - 异常情况处理机制
  - 请求日志记录
  - 性能监控

- [ ] **API文档和测试** (2天)
  - API文档编写
  - 接口功能测试
  - 性能基准测试

#### 关键输出
```python
# src/api/legal_chat_routes.py
@router.post("/api/v1/legal-chat")
async def legal_chat(request: ChatRequest) -> ChatResponse:
    """
    智能法律问答接口
    """
```

```json
// API响应格式
{
  "success": true,
  "question": "房东要赶我走怎么办？",
  "answer": {
    "diagnosis": "这是房屋租赁合同纠纷...",
    "legal_basis": "《民法典》第563条规定...",  
    "suggestions": [
      "与房东书面沟通说明违约性质",
      "收集保留租赁合同等证据",
      "可要求继续履行或损害赔偿"
    ],
    "confidence": 0.85
  },
  "response_time": 2.3
}
```

### 阶段3：前端界面开发 (2周)

#### 任务清单
- [ ] **页面设计和布局** (3天)
  - 简洁清晰的界面设计
  - 响应式布局实现
  - 用户体验优化

- [ ] **交互功能开发** (4天)
  - 问题输入和提交
  - 答案展示和格式化
  - 加载状态和错误提示

- [ ] **前后端联调** (3天)
  - API接口集成
  - 数据格式适配
  - 跨域和网络问题解决

#### 页面设计规范

**主界面布局：**
```html
<!DOCTYPE html>
<html>
<head>
    <title>法智导航 - AI法律顾问</title>
</head>
<body>
    <div class="container">
        <!-- 顶部标题 -->
        <header class="header">
            <h1>法智导航</h1>
            <p>像专家一样简单的法律咨询</p>
        </header>
        
        <!-- 问题输入区 -->
        <div class="question-input">
            <textarea placeholder="请用您自己的话描述遇到的法律问题，比如：房东突然要我搬走，怎么办？"></textarea>
            <button class="ask-btn">询问法律建议</button>
        </div>
        
        <!-- 答案显示区 -->
        <div class="answer-display">
            <div class="diagnosis-card">
                <h3>🔍 问题诊断</h3>
                <p id="diagnosis-text"></p>
            </div>
            
            <div class="legal-basis-card">  
                <h3>📜 法律依据</h3>
                <p id="legal-basis-text"></p>
            </div>
            
            <div class="suggestions-card">
                <h3>💡 解决建议</h3>
                <ul id="suggestions-list"></ul>
            </div>
        </div>
    </div>
</body>
</html>
```

#### 关键输出
- `frontend/index.html` - 主页面
- `frontend/static/css/style.css` - 样式文件
- `frontend/static/js/main.js` - 交互逻辑

### 阶段4：系统整合测试 (1周)

#### 任务清单
- [ ] **功能完整性测试** (2天)
  - 端到端用户场景测试
  - 各模块集成测试
  - 边界情况测试

- [ ] **性能和稳定性测试** (2天)
  - 响应时间优化
  - 并发处理测试
  - 错误恢复测试

- [ ] **用户体验验证** (3天)
  - 真实用户测试
  - 易用性评估
  - 反馈收集和优化

#### 测试用例
```
测试场景1：租房纠纷
输入："我的房东说要涨房租，但是合同还没到期，这合法吗？"
期望：能识别为租赁合同纠纷，给出相关法条和建议

测试场景2：网购纠纷  
输入："网上买的手机是假货，商家不退货，我该怎么办？"
期望：能识别为消费者权益问题，给出维权建议

测试场景3：劳动争议
输入："公司突然通知我被裁员，给的补偿很少，合理吗？"
期望：能识别为劳动纠纷，给出相关法规和建议

测试场景4：边界情况
输入："我想问一下法律问题"
期望：能识别问题过于模糊，引导用户提供更多信息
```

## 📊 项目管理

### 时间节点规划

| 阶段 | 起始日期 | 结束日期 | 持续时间 | 关键里程碑 |
|------|----------|----------|----------|------------|
| 阶段1 | 第1周周一 | 第2周周三 | 1.5周 | AI服务开发完成 |
| 阶段2 | 第2周周四 | 第4周周一 | 1.5周 | 后端API开发完成 |
| 阶段3 | 第4周周二 | 第6周周一 | 2周 | 前端界面开发完成 |
| 阶段4 | 第6周周二 | 第7周周一 | 1周 | MVP版本发布就绪 |

### 资源分配

#### 人力资源
- **后端工程师** 1人 (负责AI集成和API开发)
- **全栈工程师** 1人 (负责前端开发和系统整合)
- **产品经理** 0.5人 (负责需求确认和测试协调)

#### 技术资源
- **AI API费用**：GPT-4 约¥2,000/月
- **服务器资源**：云服务器 约¥1,000/月
- **开发工具**：IDE、测试工具等

### 风险控制

#### 技术风险
- **AI模型效果不佳**：准备备选方案(Claude-3, 文心一言)
- **API稳定性问题**：实现重试机制和降级方案
- **性能不达标**：提前进行性能测试和优化

#### 进度风险
- **开发延期**：保持每日进度检查
- **需求变更**：严格控制MVP范围
- **集成问题**：提前进行模块间联调

#### 质量风险
- **用户体验差**：及时收集反馈并快速迭代
- **答案质量低**：持续优化提示工程
- **系统不稳定**：完善错误处理和监控

## 📈 成功指标

### 技术指标
- **问题理解准确率** ≥ 70%
- **答案相关性** ≥ 75%
- **系统响应时间** ≤ 5秒
- **系统可用性** ≥ 95%

### 用户体验指标  
- **用户完成率** ≥ 80% (用户提问后查看完整答案)
- **用户满意度** ≥ 60% (基于问卷调查)
- **界面易用性** ≥ 70% (用户能独立完成操作)

### 业务指标
- **日活跃查询** ≥ 50次
- **用户反馈收集** ≥ 20条
- **问题解决率** ≥ 65% (用户认为得到有用建议)

## 🚀 发布计划

### 内测版本 (第5周)
- **目标用户**：开发团队内部
- **测试重点**：基础功能完整性
- **发布范围**：开发环境

### Beta版本 (第6周)  
- **目标用户**：10-20位外部测试用户
- **测试重点**：用户体验和实用性
- **发布范围**：测试环境

### MVP正式版 (第7周)
- **目标用户**：公开发布，接受真实用户使用
- **发布重点**：稳定性和用户体验
- **发布范围**：生产环境

## 📝 后续优化方向

### 短期优化 (MVP后2-4周)
- 基于用户反馈优化答案质量
- 增加常见问题的快速回复
- 改进界面细节和交互体验

### 中期扩展 (MVP后1-3个月)
- 增加知识图谱可视化
- 支持多轮对话
- 添加用户账户和历史记录

### 长期发展 (MVP后3-6个月)
- 移动端专门应用
- 语音交互功能
- 个性化推荐系统

---

**总结：MVP版本专注于实现核心用户价值，在6周内交付一个基础但完整可用的智能法律问答产品。通过快速迭代验证产品方向，为后续完整版开发奠定基础。**

---

**文档版本**：v1.0  
**创建日期**：2025-09-08  
**项目负责人**：法智导航开发团队